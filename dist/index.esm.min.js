import{__extends as n,__assign as t}from"tslib";import r,{createContext as i,Component as u}from"react";import{BehaviorSubject as e,Subject as o}from"rxjs";var f={data:{},get:function(n){return this.data[n]},register:function(n,t){this.data[n]=t}},c={data:{},get:function(n){return this.data[n]},set:function(n,t){if(void 0!==this.data[n])throw new Error(n+" is already exists.");this.data[n]=t}},a=function(e){if(void 0!==f.get(e))throw new Error(e+" 已被注册！");var o=i({});return f.register(e,o),function(i){return function(u){function e(){var n=null!==u&&u.apply(this,arguments)||this;return n.state={context:{}},n}return n(e,u),e.prototype.componentDidMount=function(){var n=this;c.get(i.name).subscribe(function(t){n.setState({context:t})})},e.prototype.render=function(){return r.createElement(o.Provider,{value:this.state.context},r.createElement(i,t({},this.props)))},e}(u)}},s=function(n,t,r){var i=n.constructor.name,u=r.initializer();if(!c.get(i)){var o=new e({});c.set(i,o)}var f=c.get(i);function a(n){f.subscribe(function(r){var i;r[t]!==n&&f.next(Object.assign({},r,((i={})[t]=n,i)))}).unsubscribe()}a(u);return{get:function(){return u},set:function(n){a(n),u=n},enumerable:!1,configurable:!0}},v=function(n,t){var r=n.constructor.name;if(!c.get(r)){var i=new e({});c.set(r,i)}var u=c.get(r),f=new o;u.subscribe(function(n){var r;void 0===n[t]&&u.next(Object.assign({},n,((r={})[t]=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];f.next.apply(f,n)},r)))}).unsubscribe();return{get:function(){return f},set:function(){console.log("can note set listen: "+t+", it's readonly.")},enumerable:!1,configurable:!0}},l=function(i,e){return function(o){return function(u){function c(){var n=null!==u&&u.apply(this,arguments)||this;return n.renderContext=function(n){var i={};return e?e.forEach(function(t){i[t]=n[t]}):i=n,r.createElement(o,t({},i))},n}return n(c,u),c.prototype.render=function(){var n=f.get(i);return n?r.createElement(n.Consumer,null,this.renderContext):null},c}(u)}};export{a as Provider,s as Context,v as Listener,l as Consumer};
//# sourceMappingURL=index.esm.min.js.map
