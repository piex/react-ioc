"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),s=t(e),r={data:{},get(t){return this.data[t]},register(t,e){this.data[t]=e}};const n={data:{},get(t){return this.data[t]},set(t,e){if(void 0!==this.data[t])throw new Error(`${t} is already exists.`);this.data[t]=e}},i=t=>{if(void 0!==r.get(t))throw new Error(`${t} is already regist.`);const i=e.createContext({});return r.register(t,i),t=>(class extends e.Component{constructor(){super(...arguments),this.state={context:{}}}componentDidMount(){n.get(t.name).subscribe(t=>{this.setState({context:t})})}render(){return s.createElement(i.Provider,{value:this.state.context},s.createElement(t,Object.assign({},this.props)))}})};class o{constructor(t){this.isStopped=!1,this.destination=this.safeObserver(t)}safeObserver(t){return{next:t}}next(t){if(!this.isStopped&&this.next)try{this.destination.next(t)}catch(t){throw this.unsubscribe(),t}}error(t){if(!this.isStopped&&this.error){try{this.destination.error(t)}catch(t){throw this.unsubscribe(),t}this.unsubscribe()}}complete(){if(!this.isStopped&&this.complete){try{this.destination.complete()}catch(t){throw this.unsubscribe(),t}this.unsubscribe()}}unsubscribe(){this.isStopped=!0}}class c{constructor(){this.closed=!1,this.observers=[]}next(t){this.closed||this.observers.forEach(e=>e.next(t))}subscribe(t){const e=new o(t);return this.observers.push(e),e}unsubscribe(){this.closed=!0}}class h extends c{constructor(t){super(),this.store=t}get value(){return this.getValue()}getValue(){if(this.closed)throw new Error("subject has been closed.");return this.store}next(t){this.store=t,super.next(t)}subscribe(t){const e=super.subscribe(t);return e.next(this.store),e}}const u=(t,e,s)=>{const r=t.constructor.name;let i=s.initializer();n.get(r)||n.set(r,new h({}));const o=n.get(r);function c(t){o.subscribe(s=>{s[e]!==t&&o.next(Object.assign({},s,{[e]:t}))}).unsubscribe()}c(i);return{configurable:!0,enumerable:!1,get:()=>i,set:t=>{c(t),i=t}}},a=(t,e)=>{const s=t.constructor.name;n.get(s)||n.set(s,new h({}));const r=n.get(s),i=new c;r.subscribe(t=>{void 0===t[e]&&r.next(Object.assign({},t,{[e]:function(t){i.next(t)}}))}).unsubscribe();return{configurable:!0,enumerable:!1,get:()=>i,set:()=>{console.log(`can note set listen: ${e}, it's readonly.`)}}},l=(t,n)=>i=>(class extends e.Component{constructor(){super(...arguments),this.renderContext=(t=>{let e={};return n?n.forEach(s=>{e[s]=t[s]}):e=t,s.createElement(i,Object.assign({},e))})}render(){const e=r.get(t);return e?s.createElement(e.Consumer,null,this.renderContext):null}});exports.Provider=i,exports.Context=u,exports.Listener=a,exports.Consumer=l;
//# sourceMappingURL=index.min.js.map
