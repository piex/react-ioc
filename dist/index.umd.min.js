!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],i):i((t=t||self).ReactIoC={},t.React)}(this,function(t,i){"use strict";var n="default"in i?i.default:i,u=function(t,i){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)};function f(t,i){function n(){this.constructor=t}u(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var h=function(){return(h=Object.assign||function(t){for(var i,n=1,u=arguments.length;n<u;n++)for(var f in i=arguments[n])Object.prototype.hasOwnProperty.call(i,f)&&(t[f]=i[f]);return t}).apply(this,arguments)},r={data:{},get:function(t){return this.data[t]},register:function(t,i){this.data[t]=i}},s={data:{},get:function(t){return this.data[t]},set:function(t,i){if(void 0!==this.data[t])throw new Error(t+" is already exists.");this.data[t]=i}};function o(t){return"function"==typeof t}var e=!1,v={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;e=t},get useDeprecatedSynchronousErrorHandling(){return e}};function c(t){setTimeout(function(){throw t})}var a={closed:!0,next:function(t){},error:function(t){if(v.useDeprecatedSynchronousErrorHandling)throw t;c(t)},complete:function(){}},l=Array.isArray||function(t){return t&&"number"==typeof t.length};function w(t){return null!=t&&"object"==typeof t}var j,d={e:{}};function m(){try{return j.apply(this,arguments)}catch(t){return d.e=t,d}}function x(t){return j=t,m}function g(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,i){return i+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}g.prototype=Object.create(Error.prototype);var y=g,k=function(){function t(t){this.closed=!1,this.t=null,this.i=null,this.u=null,t&&(this.h=t)}var i;return t.prototype.unsubscribe=function(){var t,i=!1;if(!this.closed){var n=this.t,u=this.i,f=this.h,h=this.u;this.closed=!0,this.t=null,this.i=null,this.u=null;for(var r=-1,s=u?u.length:0;n;)n.remove(this),n=++r<s&&u[r]||null;if(o(f))x(f).call(this)===d&&(i=!0,t=t||(d.e instanceof y?O(d.e.errors):[d.e]));if(l(h))for(r=-1,s=h.length;++r<s;){var e=h[r];if(w(e))if(x(e.unsubscribe).call(e)===d){i=!0,t=t||[];var v=d.e;v instanceof y?t=t.concat(O(v.errors)):t.push(v)}}if(i)throw new y(t)}},t.prototype.add=function(i){if(!i||i===t.EMPTY)return t.EMPTY;if(i===this)return this;var n=i;switch(typeof i){case"function":n=new t(i);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n.s){var u=n;(n=new t).u=[u]}break;default:throw new Error("unrecognized teardown "+i+" added to Subscription.")}return(this.u||(this.u=[])).push(n),n.s(this),n},t.prototype.remove=function(t){var i=this.u;if(i){var n=i.indexOf(t);-1!==n&&i.splice(n,1)}},t.prototype.s=function(t){var i=this.t,n=this.i;i&&i!==t?n?-1===n.indexOf(t)&&n.push(t):this.i=[t]:this.t=t},t.EMPTY=((i=new t).closed=!0,i),t}();function O(t){return t.reduce(function(t,i){return t.concat(i instanceof y?i.errors:i)},[])}var P="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),A=function(t){function i(n,u,f){var h=t.call(this)||this;switch(h.syncErrorValue=null,h.syncErrorThrown=!1,h.syncErrorThrowable=!1,h.isStopped=!1,h.o=null,arguments.length){case 0:h.destination=a;break;case 1:if(!n){h.destination=a;break}if("object"==typeof n){n instanceof i?(h.syncErrorThrowable=n.syncErrorThrowable,h.destination=n,n.add(h)):(h.syncErrorThrowable=!0,h.destination=new M(h,n));break}default:h.syncErrorThrowable=!0,h.destination=new M(h,n,u,f)}return h}return f(i,t),i.prototype[P]=function(){return this},i.create=function(t,n,u){var f=new i(t,n,u);return f.syncErrorThrowable=!1,f},i.prototype.next=function(t){this.isStopped||this.v(t)},i.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this.l(t))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this.j())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},i.prototype.v=function(t){this.destination.next(t)},i.prototype.l=function(t){this.destination.error(t),this.unsubscribe()},i.prototype.j=function(){this.destination.complete(),this.unsubscribe()},i.prototype.m=function(){var t=this.t,i=this.i;return this.t=null,this.i=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this.t=t,this.i=i,this.o=null,this},i}(k),M=function(t){function i(i,n,u,f){var h,r=t.call(this)||this;r.g=i;var s=r;return o(n)?h=n:n&&(h=n.next,u=n.error,f=n.complete,n!==a&&(o((s=Object.create(n)).unsubscribe)&&r.add(s.unsubscribe.bind(s)),s.unsubscribe=r.unsubscribe.bind(r))),r.k=s,r.v=h,r.l=u,r.j=f,r}return f(i,t),i.prototype.next=function(t){if(!this.isStopped&&this.v){var i=this.g;v.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable?this.__tryOrSetError(i,this.v,t)&&this.unsubscribe():this.__tryOrUnsub(this.v,t)}},i.prototype.error=function(t){if(!this.isStopped){var i=this.g,n=v.useDeprecatedSynchronousErrorHandling;if(this.l)n&&i.syncErrorThrowable?(this.__tryOrSetError(i,this.l,t),this.unsubscribe()):(this.__tryOrUnsub(this.l,t),this.unsubscribe());else if(i.syncErrorThrowable)n?(i.syncErrorValue=t,i.syncErrorThrown=!0):c(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;c(t)}}},i.prototype.complete=function(){var t=this;if(!this.isStopped){var i=this.g;if(this.j){var n=function(){return t.j.call(t.k)};v.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable?(this.__tryOrSetError(i,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},i.prototype.__tryOrUnsub=function(t,i){try{t.call(this.k,i)}catch(t){if(this.unsubscribe(),v.useDeprecatedSynchronousErrorHandling)throw t;c(t)}},i.prototype.__tryOrSetError=function(t,i,n){if(!v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{i.call(this.k,n)}catch(i){return v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(c(i),!0)}return!1},i.prototype.h=function(){var t=this.g;this.k=null,this.g=null,t.unsubscribe()},i}(A);var q="function"==typeof Symbol&&Symbol.observable||"@@observable";function z(){}var B=function(){function t(t){this.O=!1,t&&(this.P=t)}return t.prototype.lift=function(i){var n=new t;return n.source=this,n.operator=i,n},t.prototype.subscribe=function(t,i,n){var u=this.operator,f=function(t,i,n){if(t){if(t instanceof A)return t;if(t[P])return t[P]()}return t||i||n?new A(t,i,n):new A(a)}(t,i,n);if(u?u.call(f,this.source):f.add(this.source||v.useDeprecatedSynchronousErrorHandling&&!f.syncErrorThrowable?this.P(f):this.A(f)),v.useDeprecatedSynchronousErrorHandling&&f.syncErrorThrowable&&(f.syncErrorThrowable=!1,f.syncErrorThrown))throw f.syncErrorValue;return f},t.prototype.A=function(t){try{return this.P(t)}catch(i){v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=i),!function(t){for(;t;){var i=t,n=i.closed,u=i.destination,f=i.isStopped;if(n||f)return!1;t=u&&u instanceof A?u:null}return!0}(t)?console.warn(i):t.error(i)}},t.prototype.forEach=function(t,i){var n=this;return new(i=F(i))(function(i,u){var f;f=n.subscribe(function(i){try{t(i)}catch(t){u(t),f&&f.unsubscribe()}},u,i)})},t.prototype.P=function(t){var i=this.source;return i&&i.subscribe(t)},t.prototype[q]=function(){return this},t.prototype.pipe=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return 0===i.length?this:((t=i)?1===t.length?t[0]:function(i){return t.reduce(function(t,i){return i(t)},i)}:z)(this)},t.prototype.toPromise=function(t){var i=this;return new(t=F(t))(function(t,n){var u;i.subscribe(function(t){return u=t},function(t){return n(t)},function(){return t(u)})})},t.create=function(i){return new t(i)},t}();function F(t){if(t||(t=v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function G(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}G.prototype=Object.create(Error.prototype);var I=G,J=function(t){function i(i,n){var u=t.call(this)||this;return u.subject=i,u.subscriber=n,u.closed=!1,u}return f(i,t),i.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,i=t.observers;if(this.subject=null,i&&0!==i.length&&!t.isStopped&&!t.closed){var n=i.indexOf(this.subscriber);-1!==n&&i.splice(n,1)}}},i}(k),K=function(t){function i(i){var n=t.call(this,i)||this;return n.destination=i,n}return f(i,t),i}(A),L=function(t){function i(){var i=t.call(this)||this;return i.observers=[],i.closed=!1,i.isStopped=!1,i.hasError=!1,i.thrownError=null,i}return f(i,t),i.prototype[P]=function(){return new K(this)},i.prototype.lift=function(t){var i=new N(this,this);return i.operator=t,i},i.prototype.next=function(t){if(this.closed)throw new I;if(!this.isStopped)for(var i=this.observers,n=i.length,u=i.slice(),f=0;f<n;f++)u[f].next(t)},i.prototype.error=function(t){if(this.closed)throw new I;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var i=this.observers,n=i.length,u=i.slice(),f=0;f<n;f++)u[f].error(t);this.observers.length=0},i.prototype.complete=function(){if(this.closed)throw new I;this.isStopped=!0;for(var t=this.observers,i=t.length,n=t.slice(),u=0;u<i;u++)n[u].complete();this.observers.length=0},i.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},i.prototype.A=function(i){if(this.closed)throw new I;return t.prototype.A.call(this,i)},i.prototype.P=function(t){if(this.closed)throw new I;return this.hasError?(t.error(this.thrownError),k.EMPTY):this.isStopped?(t.complete(),k.EMPTY):(this.observers.push(t),new J(this,t))},i.prototype.asObservable=function(){var t=new B;return t.source=this,t},i.create=function(t,i){return new N(t,i)},i}(B),N=function(t){function i(i,n){var u=t.call(this)||this;return u.destination=i,u.source=n,u}return f(i,t),i.prototype.next=function(t){var i=this.destination;i&&i.next&&i.next(t)},i.prototype.error=function(t){var i=this.destination;i&&i.error&&this.destination.error(t)},i.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},i.prototype.P=function(t){return this.source?this.source.subscribe(t):k.EMPTY},i}(L);var Q=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,i){var n=this.connectable;n.M++;var u=new W(t,n),f=i.subscribe(u);return u.closed||(u.connection=n.connect()),f},t}(),W=function(t){function i(i,n){var u=t.call(this,i)||this;return u.connectable=n,u}return f(i,t),i.prototype.h=function(){var t=this.connectable;if(t){this.connectable=null;var i=t.M;if(i<=0)this.connection=null;else if(t.M=i-1,i>1)this.connection=null;else{var n=this.connection,u=t.q;this.connection=null,!u||n&&u!==n||u.unsubscribe()}}else this.connection=null},i}(A),X=function(t){function i(i,n){var u=t.call(this)||this;return u.source=i,u.subjectFactory=n,u.M=0,u.B=!1,u}return f(i,t),i.prototype.P=function(t){return this.getSubject().subscribe(t)},i.prototype.getSubject=function(){var t=this.F;return t&&!t.isStopped||(this.F=this.subjectFactory()),this.F},i.prototype.connect=function(){var t=this.q;return t||(this.B=!1,(t=this.q=new k).add(this.source.subscribe(new Y(this.getSubject(),this))),t.closed?(this.q=null,t=k.EMPTY):this.q=t),t},i.prototype.refCount=function(){return(t=this).lift(new Q(t));var t},i}(B).prototype,Y=(X.P,X.B,X.getSubject,X.connect,X.refCount,function(t){function i(i,n){var u=t.call(this,i)||this;return u.connectable=n,u}return f(i,t),i.prototype.l=function(i){this.h(),t.prototype.l.call(this,i)},i.prototype.j=function(){this.connectable.B=!0,this.h(),t.prototype.j.call(this)},i.prototype.h=function(){var t=this.connectable;if(t){this.connectable=null;var i=t.q;t.M=0,t.F=null,t.q=null,i&&i.unsubscribe()}},i}(K)),Z=function(t){function i(i){var n=t.call(this)||this;return n.G=i,n}return f(i,t),Object.defineProperty(i.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),i.prototype.P=function(i){var n=t.prototype.P.call(this,i);return n&&!n.closed&&i.next(this.G),n},i.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new I;return this.G},i.prototype.next=function(i){t.prototype.next.call(this,this.G=i)},i}(L);t.Provider=function(t){if(void 0!==r.get(t))throw new Error(t+" 已被注册！");var u=i.createContext({});return r.register(t,u),function(t){return function(i){function r(){var t=null!==i&&i.apply(this,arguments)||this;return t.state={context:{}},t}return f(r,i),r.prototype.componentDidMount=function(){var i=this;s.get(t.name).subscribe(function(t){i.setState({context:t})})},r.prototype.render=function(){return n.createElement(u.Provider,{value:this.state.context},n.createElement(t,h({},this.props)))},r}(i.Component)}},t.Context=function(t,i,n){var u=t.constructor.name,f=n.initializer();if(!s.get(u)){var h=new Z({});s.set(u,h)}var r=s.get(u);function o(t){r.subscribe(function(n){var u;n[i]!==t&&r.next(Object.assign({},n,((u={})[i]=t,u)))}).unsubscribe()}o(f);return{get:function(){return f},set:function(t){o(t),f=t},enumerable:!1,configurable:!0}},t.Listener=function(t,i){var n=t.constructor.name;if(!s.get(n)){var u=new Z({});s.set(n,u)}var f=s.get(n),h=new L;f.subscribe(function(t){var n;void 0===t[i]&&f.next(Object.assign({},t,((n={})[i]=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];h.next.apply(h,t)},n)))}).unsubscribe();return{get:function(){return h},set:function(){console.log("can note set listen: "+i+", it's readonly.")},enumerable:!1,configurable:!0}},t.Consumer=function(t,u){return function(s){return function(i){function o(){var t=null!==i&&i.apply(this,arguments)||this;return t.renderContext=function(t){var i={};return u?u.forEach(function(n){i[n]=t[n]}):i=t,n.createElement(s,h({},i))},t}return f(o,i),o.prototype.render=function(){var i=r.get(t);return i?n.createElement(i.Consumer,null,this.renderContext):null},o}(i.Component)}},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.min.js.map
